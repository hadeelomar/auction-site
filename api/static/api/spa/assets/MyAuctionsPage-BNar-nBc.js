import{d as k,r as u,o as C,b as n,e as i,f as p,g as t,N as E,p as g,q as A,t as r,h as D,F as M,l as x,i as h,n as F,s as N,_ as S}from"./index-DaiPwfNo.js";const $={class:"page-wrapper"},B={class:"main-content"},V={class:"page-container"},j={class:"page-header"},L={key:0,class:"loading-state"},T={key:1,class:"error-state"},I={key:2,class:"auctions-list"},P={class:"auction-image"},R=["src","alt"],O={class:"auction-details"},q={class:"auction-title"},z={class:"auction-stats"},Y={class:"stat"},Z={class:"stat"},G={class:"auction-meta"},H={class:"auction-time"},J={class:"auction-actions"},K=["onClick","disabled","title"],Q=["onClick","disabled","title"],U={key:0,class:"empty-state"},W=k({__name:"MyAuctionsPage",setup(X){const l=u([]),_=u(!0),d=u(""),c=u(null),w=N(),f=o=>"Â£"+o.toLocaleString(),v=async()=>{try{_.value=!0,d.value="";const o=await fetch("/api/auth/user/");if(!o.ok)throw new Error("Failed to get user info");const e=await o.json();if(!e.is_authenticated){l.value=[];return}const a=await fetch(`/api/auctions/search/?owner=${e.username}`);if(!a.ok)throw new Error("Failed to fetch auctions");const s=await a.json();l.value=s.auctions}catch(o){d.value=o instanceof Error?o.message:"Failed to load auctions",console.error("Error fetching my auctions:",o)}finally{_.value=!1}},m=o=>{w.push(`/edit/${o.id}`)},y=async o=>{if(confirm(`Are you sure you want to delete "${o.title}"? This action cannot be undone.`))try{c.value=o.id;const e=await fetch(`/api/auctions/${o.id}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok){const a=await e.json();throw new Error(a.error||"Failed to delete auction")}l.value=l.value.filter(a=>a.id!==o.id)}catch(e){alert(e instanceof Error?e.message:"Failed to delete auction")}finally{c.value=null}};return C(()=>{v()}),(o,e)=>{const a=A("router-link");return i(),n("div",$,[p(E),t("main",B,[t("div",V,[t("div",j,[e[1]||(e[1]=t("div",{class:"header-content"},[t("h1",{class:"page-title"},"My Auctions"),t("p",{class:"page-description"},"Manage auctions you've created")],-1)),p(a,{to:"/create",class:"create-button"},{default:g(()=>[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5v14"})],-1),h(" New Auction ",-1)])]),_:1})]),_.value?(i(),n("div",L,[...e[2]||(e[2]=[t("p",null,"Loading your auctions...",-1)])])):d.value?(i(),n("div",T,[t("p",null,r(d.value),1),t("button",{onClick:v,class:"retry-button"},"Retry")])):(i(),n("div",I,[(i(!0),n(M,null,x(l.value,s=>(i(),n("div",{key:s.id,class:"auction-card"},[t("div",P,[t("img",{src:s.image||"/placeholder.svg?height=80&width=80",alt:s.title},null,8,R)]),t("div",O,[t("h3",q,r(s.title),1),t("div",z,[t("span",Y,[t("strong",null,r(f(s.current_price)),1),e[3]||(e[3]=h(" current bid ",-1))]),t("span",Z,[t("strong",null,r(s.bid_count),1),e[4]||(e[4]=h(" bids ",-1))])]),t("div",G,[t("span",{class:F(["auction-status",s.ends_at>new Date().toISOString()?"active":"ended"])},r(s.ends_at>new Date().toISOString()?"Active":"Ended"),3),t("span",H,r(s.time_left),1)])]),t("div",J,[t("button",{onClick:b=>m(s),class:"edit-button",disabled:s.bid_count>0,title:s.bid_count>0?"Cannot edit auction with bids":"Edit auction"}," Edit ",8,K),t("button",{onClick:b=>y(s),class:"delete-button",disabled:c.value===s.id||s.bid_count>0,title:s.bid_count>0?"Cannot delete auction with bids":"Delete auction"},r(c.value===s.id?"Deleting...":"Delete"),9,Q)])]))),128)),l.value.length===0?(i(),n("div",U,[e[6]||(e[6]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),t("path",{d:"m3.3 7 8.7 5 8.7-5"}),t("path",{d:"M12 22V12"})],-1)),e[7]||(e[7]=t("p",null,"You haven't created any auctions yet",-1)),p(a,{to:"/create",class:"empty-create-button"},{default:g(()=>[...e[5]||(e[5]=[h("Create your first auction",-1)])]),_:1})])):D("",!0)]))])])])}}}),et=S(W,[["__scopeId","data-v-a90b6b9e"]]);export{et as default};
